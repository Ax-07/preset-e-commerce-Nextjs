import { cn } from "@/src/utils/tailwind_cn";
import React, { useEffect, useLayoutEffect, useRef, useState } from "react";

export const LogoAnimationStroke: React.FC<{
  /** Couleur du trait */
  strokeColor?: string;
  /** Durée de dessin (ex: '2s') */
  drawDuration?: string;
  /** Délai avant démarrage (ex: '0.5s') */
  startDelay?: string;
  /** Classes CSS supplémentaires à appliquer au conteneur. */
  className?: string;
}> = ({ strokeColor = "#33771F", drawDuration = "3s", startDelay = "0s", className }) => {
  const pathRef = useRef<SVGPathElement>(null);
  const [pathLength, setPathLength] = useState(0);

  useLayoutEffect(() => {

    if (!pathRef.current) return;
    const length = pathRef.current.getTotalLength();
    setPathLength(length);
    pathRef.current.setAttribute('stroke-dasharray', `${length}`);
    pathRef.current.setAttribute('stroke-dashoffset', `${length}`);
    pathRef.current.style.fillOpacity = '0';
  }, []);

  return (
    <div className={cn("size-120", className)}>
      <svg
        viewBox="0 0 277 262"
        // width={277}
        // height={262}
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g filter="url(#filter0_d_12_17)">
          <path
            ref={pathRef}
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M137.568 0.535859C136.677 1.54644 132.651 13.7419 130.954 20.5737C129.574 26.128 129.065 28.7376 128.502 33.1362C128.377 34.1088 128.118 34.9043 127.926 34.9043C127.734 34.9043 127.577 34.755 127.577 34.5726C127.577 34.1665 124.855 33.0431 123.872 33.0431C123.481 33.0431 123.075 33.3361 122.97 33.6945C121.905 37.3352 121.644 45.9075 122.509 48.7837C122.793 49.7269 122.953 50.5707 122.864 50.6589C122.776 50.7475 121.81 50.3355 120.716 49.7433C118.678 48.6393 117.774 48.6355 117.334 49.7287C117.197 50.0712 116.993 52.0592 116.881 54.1463C116.656 58.3479 117.04 61.0238 118.515 65.543C119.037 67.1428 119.383 68.533 119.284 68.6324C119.184 68.7322 118.083 68.4701 116.837 68.0506C114.114 67.1331 113.581 67.1071 113.286 67.8764C112.328 70.3744 114.08 80.3288 116.303 85.0091C117.029 86.5374 117.553 87.8581 117.467 87.9437C117.381 88.0293 116.035 87.7058 114.475 87.2242L111.638 86.3491L111.506 88.2642C111.362 90.3665 112.554 96.2703 113.846 99.857C114.288 101.085 115.293 103.289 116.079 104.753L117.507 107.416L114.548 107.213C112.166 107.05 111.548 107.116 111.38 107.552C111.129 108.207 112.83 116.47 113.858 119.585C114.263 120.813 115.422 123.533 116.433 125.63C117.444 127.726 118.272 129.484 118.272 129.538C118.272 129.591 117.1 129.579 115.666 129.511C113.343 129.401 113.06 129.462 113.061 130.07C113.061 130.445 113.883 132.775 114.887 135.248C115.891 137.72 118.75 146.011 121.24 153.673C123.731 161.333 126.27 169.109 126.884 170.951C128.938 177.122 131.93 188.497 131.589 188.838C131.161 189.266 121.965 168.711 117.092 156.435C113.848 148.263 113.529 147.534 113.148 147.407C112.957 147.343 112.341 148.314 111.78 149.565C111.219 150.816 110.687 151.767 110.599 151.679C110.511 151.59 110.203 150.177 109.915 148.539C108.966 143.144 106.519 136.382 103.839 131.749L102.909 130.141L101.44 131.563C100.632 132.345 99.7294 133.446 99.4338 134.008C98.644 135.513 98.1713 135.259 98.1713 133.329C98.1713 132.393 97.7532 130.382 97.2422 128.86C96.1263 125.535 92.7517 118.731 91.0886 116.453L89.8889 114.81L88.9855 116.267C88.4886 117.068 87.8212 118.352 87.503 119.12C87.1844 119.887 86.7924 120.515 86.632 120.515C86.4716 120.515 86.045 119.31 85.6839 117.836C84.718 113.895 82.9343 110.341 79.533 105.581C77.8684 103.252 76.4271 101.264 76.3304 101.163C76.084 100.907 75.4132 102.113 74.5087 104.439C74.0847 105.529 73.6124 106.415 73.459 106.409C73.3057 106.402 72.4481 104.891 71.5529 103.052C69.6322 99.1059 66.4326 94.4267 63.8222 91.7471L61.9537 89.8286L61.1135 91.6789C60.6516 92.6966 60.1253 93.9264 59.9437 94.4122C59.6399 95.224 59.4691 95.0446 57.8186 92.1788C56.5043 89.8975 55.0694 88.1402 52.4624 85.6195C50.5037 83.7257 48.7223 82.1806 48.5042 82.1858C47.96 82.1981 46.8046 84.6063 46.8046 85.7278C46.8046 86.7299 46.2693 86.942 45.7996 86.1261C45.4009 85.4342 39.4402 80.5294 36.108 78.1516C32.8008 75.7921 25.397 71.3284 20.9523 69.0151C17.9548 67.4547 17.5617 67.3375 17.0473 67.8519C16.5332 68.3663 16.5548 68.638 17.2643 70.5542C17.6983 71.726 18.9222 74.6111 19.9841 76.9654C25.5671 89.3403 28.98 95.9725 31.3864 99.1256C32.0869 100.043 32.6594 100.918 32.6587 101.07C32.6575 101.222 31.6533 101.765 30.4268 102.276C29.2003 102.788 28.1961 103.42 28.195 103.679C28.1927 104.418 32.8053 111.222 34.4818 112.953C35.3115 113.81 36.7486 115.032 37.6751 115.67C38.6019 116.307 39.3516 116.947 39.3415 117.09C39.3311 117.234 38.3261 117.824 37.1082 118.401C35.7276 119.055 34.8935 119.68 34.8935 120.062C34.8935 120.398 36.6537 122.389 38.8048 124.487C42.0777 127.677 43.2465 128.555 45.9645 129.864L49.2125 131.429L47.5434 132.107C45.1266 133.087 44.0915 133.673 43.9344 134.148C43.3452 135.93 54.9507 144.556 60.5731 146.514L61.8725 146.967L58.7756 148.039C55.2094 149.274 55.03 149.394 55.8135 150.018C63.4098 156.064 70.0893 160.083 73.8871 160.89C75.2524 161.181 75.2022 161.631 73.7643 161.992C73.2338 162.125 72.1365 162.673 71.3258 163.209L69.8518 164.184L71.0768 165.455C72.2564 166.678 76.5619 169.453 79.8267 171.095C80.6898 171.529 82.9511 172.324 84.8517 172.861C86.7522 173.397 88.4417 173.958 88.6059 174.107C88.7704 174.256 87.8908 174.593 86.6517 174.856C85.413 175.119 84.4057 175.436 84.4143 175.562C84.4444 176.014 89.5368 178.918 95.3796 181.816C104.939 186.558 122.023 196.749 120.989 197.094C120.195 197.358 114.605 195.028 102.337 189.317C86.9097 182.134 83.1137 180.602 82.1806 181.179C81.8277 181.396 81.8586 181.723 82.3168 182.609C83.3281 184.564 82.995 184.572 80.4561 182.65C77.552 180.452 75.4653 179.354 71.3165 177.84C68.236 176.715 65.7879 176.39 65.7879 177.105C65.7879 177.316 66.0414 178.096 66.3511 178.837C66.9999 180.39 66.8223 180.821 65.8832 179.972C63.9942 178.264 55.4133 175.023 50.9921 174.348L49.4101 174.106V175.438C49.4101 176.171 49.591 177.108 49.8125 177.522C50.034 177.935 50.152 178.336 50.0753 178.413C49.9986 178.49 48.4357 178.074 46.6021 177.488C43.5729 176.521 37.2683 175.232 35.565 175.232C34.8574 175.232 34.8507 175.461 35.473 178.303L35.6971 179.326H28.9569C23.0319 179.326 11.8436 180.152 11.0404 180.648C10.8814 180.747 9.44948 180.992 7.8586 181.194C4.29383 181.646 3.79058 182.058 5.30181 183.287C7.02743 184.691 24.97 193.305 28.5456 194.447C30.2969 195.006 31.7899 195.508 31.8632 195.562C31.9369 195.617 31.6477 196.152 31.2211 196.751C30.7946 197.35 30.2761 198.286 30.0687 198.831C29.7304 199.721 29.7955 199.861 30.7108 200.216C33.0901 201.138 39.7409 202.398 42.2449 202.401C43.7293 202.403 44.9435 202.51 44.9435 202.64C44.9435 202.769 44.5969 203.435 44.1737 204.121C43.7434 204.816 43.4561 205.818 43.5223 206.389C43.6254 207.28 43.8577 207.453 45.3157 207.724C47.8368 208.192 56.4195 208.145 58.486 207.651C59.4855 207.413 60.3725 207.287 60.457 207.372C60.5415 207.456 60.1007 208.39 59.4769 209.448C58.0893 211.801 58.0624 212.369 59.3224 212.686C61.4255 213.214 68.8476 212.541 72.3018 211.509C74.1443 210.959 75.9615 210.42 76.34 210.312C76.9832 210.128 76.9926 210.186 76.4781 211.191C76.1752 211.784 75.8104 212.812 75.6671 213.478C75.414 214.653 75.4422 214.688 76.646 214.686C80.647 214.683 86.1072 213.581 91.099 211.77C91.4061 211.659 91.1128 212.192 90.4476 212.955C88.329 215.383 88.7053 215.502 94.2629 214.16C99.5582 212.881 110.609 211.058 115.852 210.598C118.308 210.382 120.863 210.136 121.528 210.051C125.891 209.491 118.324 211.968 105.691 215.235C94.1445 218.221 92.5243 218.825 94.8272 219.286C95.9055 219.502 96.4092 220.271 95.4726 220.271C93.8319 220.272 84.6376 225.936 84.8993 226.785C84.9622 226.99 85.6292 227.312 86.3815 227.502C87.1337 227.692 87.749 227.965 87.749 228.109C87.749 228.253 86.9536 228.57 85.981 228.812C85.0084 229.054 83.652 229.581 82.9663 229.982C81.3271 230.941 77.7135 234.138 77.9093 234.455C77.9938 234.591 78.6512 234.814 79.3699 234.948C80.0887 235.083 80.6761 235.228 80.6753 235.27C80.6742 235.312 78.7848 237.272 76.4767 239.626C72.6461 243.533 65.4157 252.544 65.4157 253.411C65.4157 253.609 65.6722 253.771 65.9856 253.771C67.2109 253.771 83.6434 248.394 86.5907 247.029C88.3081 246.233 89.7739 245.582 89.8476 245.582C89.9217 245.582 89.9824 246.336 89.9824 247.257C89.9824 248.178 90.0646 248.932 90.1651 248.932C90.6226 248.932 95.9308 246.436 97.5154 245.476C98.485 244.888 99.627 243.918 100.053 243.32C101.066 241.897 101.521 241.944 101.521 243.473C101.521 244.155 101.62 244.812 101.74 244.933C101.861 245.053 103.327 244.288 104.997 243.231C107.963 241.357 111.562 238.142 112.784 236.276L113.393 235.346L113.413 236.769C113.426 237.717 113.588 238.152 113.898 238.072C114.473 237.923 123.029 229.079 126.959 224.569C128.556 222.737 130.814 219.791 131.977 218.023C133.14 216.256 134.305 214.489 134.566 214.097L138.371 210.143L141.907 213.109L143.655 215.853C144.617 217.361 146.339 219.768 147.483 221.201C150.733 225.275 162.996 238.145 163.393 237.9C163.589 237.779 163.643 237.113 163.513 236.42C163.226 234.89 163.797 234.757 164.4 236.213C164.64 236.792 165.875 238.279 167.144 239.518C169.503 241.82 174.396 245.304 174.864 245.015C175.006 244.927 175.238 244.141 175.377 243.269L175.63 241.685L176.364 242.844C177.322 244.357 179.127 245.571 183.168 247.423C184.98 248.253 186.529 248.932 186.611 248.932C186.693 248.932 186.76 248.178 186.76 247.257C186.76 246.336 186.839 245.582 186.935 245.582C187.032 245.582 188.079 246.016 189.262 246.545C196.361 249.725 210.633 254.241 211.342 253.532C211.886 252.989 204.828 243.922 200.08 239.068C198.079 237.021 196.44 235.319 196.439 235.286C196.439 235.253 197.108 235.112 197.927 234.974C198.746 234.835 199.416 234.573 199.416 234.39C199.416 233.908 196.184 230.988 194.816 230.235C194.173 229.881 192.765 229.324 191.687 228.998C189.85 228.441 189.351 227.715 190.805 227.715C191.164 227.715 191.767 227.489 192.145 227.212C192.786 226.744 192.696 226.601 190.842 225.135C188.752 223.483 186.452 222.205 183.038 220.799C180.959 219.944 180.957 219.909 182.945 219.316C184.667 218.803 181.394 217.691 167.032 213.909C154.778 210.682 154.005 210.458 154.005 210.143C154.005 209.989 154.717 209.938 155.587 210.03C156.456 210.122 158.592 210.292 160.332 210.409C166.052 210.791 176.276 212.528 182.48 214.171C187.605 215.528 188.341 215.366 186.574 213.266C186.062 212.658 185.643 212.079 185.643 211.979C185.643 211.878 186.638 212.198 187.853 212.689C190.617 213.805 192.961 214.255 197.617 214.56C201.208 214.795 201.277 214.784 201.277 213.984C201.277 213.536 200.938 212.506 200.525 211.695C200.111 210.884 199.902 210.221 200.06 210.221C200.217 210.221 201.195 210.544 202.233 210.939C205.088 212.024 209.91 212.826 213.571 212.826C218.514 212.826 218.755 212.591 217.036 209.432C216.491 208.431 216.124 207.533 216.22 207.437C216.315 207.342 217.054 207.45 217.862 207.678C219.918 208.258 228.915 208.245 231.559 207.658C233.736 207.175 233.739 207.172 233.509 205.999C233.382 205.353 232.945 204.37 232.538 203.815C232.132 203.26 231.799 202.716 231.799 202.605C231.799 202.495 232.961 202.404 234.38 202.404C238.327 202.404 246.566 200.549 246.94 199.577C247.035 199.327 246.682 198.441 246.156 197.607C245.63 196.774 245.199 195.953 245.199 195.785C245.199 195.616 246.414 195.089 247.898 194.613C250.963 193.631 255.763 191.42 265.603 186.458C274.545 181.949 274.55 182.047 265.299 180.659C258.829 179.689 254.004 179.326 247.539 179.326C241.838 179.326 241.416 179.28 241.66 178.675C241.804 178.317 242.012 177.39 242.123 176.615L242.322 175.207L240.69 175.44C236.393 176.052 232.673 176.848 230.243 177.675C228.775 178.174 227.518 178.582 227.45 178.582C227.381 178.582 227.369 177.619 227.422 176.442C227.535 173.935 227.813 173.997 222.307 175.305C218.24 176.271 214.718 177.684 211.928 179.469C210.778 180.205 209.838 180.662 209.838 180.485C209.838 180.309 210.089 179.452 210.396 178.582C210.703 177.712 210.955 176.937 210.955 176.86C210.955 176.384 208.409 176.899 205.343 177.995C201.455 179.385 198.734 180.857 195.924 183.093C193.708 184.855 193.238 184.92 194.209 183.328C195.301 181.536 195.201 180.738 193.925 181.058C191.54 181.655 180.575 186.482 169.08 191.994C162.816 194.997 157.124 197.302 156.491 197.092C155.377 196.72 170.201 187.7 180.523 182.469C187.891 178.735 192.343 176.147 192.343 175.598C192.343 175.426 191.417 175.078 190.284 174.824C189.151 174.571 188.355 174.248 188.516 174.107C188.676 173.966 190.315 173.391 192.157 172.83C194 172.269 196.931 171.075 198.671 170.178C201.888 168.519 206.837 164.929 206.84 164.251C206.841 164.047 205.647 163.303 204.188 162.599L201.534 161.319L203.98 160.494C207.392 159.343 211.689 157.022 215.468 154.29C218.587 152.034 221.377 149.733 221.377 149.415C221.377 149.329 220.037 148.782 218.399 148.2C216.761 147.618 215.421 147.047 215.421 146.93C215.421 146.813 216.552 146.351 217.934 145.902C219.515 145.388 221.758 144.176 223.982 142.631C227.825 139.963 232.919 135.207 232.909 134.297C232.903 133.759 229.572 132.047 228.542 132.052C227.365 132.058 228.32 131.196 230.962 129.867C232.548 129.069 234.935 127.466 236.266 126.304C239.17 123.769 242.212 120.495 242.217 119.897C242.222 119.444 238.706 117.538 237.868 117.538C237.069 117.538 237.316 116.993 238.406 116.349C240.427 115.155 244.596 110.525 246.554 107.3C247.651 105.493 248.549 103.824 248.549 103.592C248.549 103.129 245.511 101.532 244.631 101.532C243.869 101.532 243.939 101.251 245.024 99.9624C246.47 98.2435 250.708 90.9606 252.558 87.0154C256.843 77.8781 260.484 69.3177 260.385 68.6183C260.159 67.0453 258.718 67.5024 252.151 71.2302C242.659 76.6185 237.351 80.2997 231.937 85.2492L230.401 86.6539L230.001 85.0668C229.78 84.1936 229.361 83.1536 229.07 82.7553C228.558 82.057 228.474 82.086 226.68 83.5879C223.59 86.1753 220.394 89.8208 218.755 92.6266L217.205 95.2806L216.379 92.8273C215.925 91.4776 215.436 90.2559 215.292 90.1119C214.816 89.6366 210.933 93.8442 208.531 97.4376C206.228 100.884 203.883 105.342 203.883 106.278C203.882 107.473 203.154 106.529 202.568 104.574C202.211 103.38 201.679 102.083 201.386 101.689C200.872 100.998 200.823 101.012 199.945 102.09C198.394 103.997 194.358 110.178 193.26 112.326C192.685 113.452 191.766 115.797 191.217 117.538L190.22 120.701L189.274 118.837C188.753 117.811 187.974 116.555 187.542 116.045L186.757 115.118L185.894 116.159C185.419 116.731 183.742 119.83 182.167 123.045C179.87 127.735 179.215 129.461 178.854 131.775C178.606 133.362 178.293 134.66 178.158 134.66C178.023 134.66 177.651 134.283 177.333 133.822C176.305 132.337 174.577 130.565 174.155 130.565C173.617 130.565 170.776 136.514 169.091 141.168C168.357 143.196 167.514 146.353 167.218 148.185C166.703 151.37 166.348 152.402 166.047 151.596C165.403 149.874 164.129 147.874 163.678 147.874C163.309 147.874 162.25 150.046 160.503 154.388C156.561 164.186 155.821 165.935 150.586 177.838C146.309 187.564 144.512 191.228 145.2 188.818C145.317 188.409 145.688 186.817 146.025 185.282C147.175 180.037 149.572 171.701 152.512 162.732C154.127 157.801 155.873 152.106 156.391 150.076C157.368 146.246 159.815 139.051 162.03 133.497C162.734 131.732 163.31 130.084 163.31 129.837C163.31 129.517 162.561 129.423 160.704 129.511C159.27 129.579 158.098 129.561 158.098 129.47C158.099 129.38 158.748 128.207 159.54 126.865C160.333 125.522 161.107 124.005 161.26 123.493C161.413 122.981 161.925 121.634 162.397 120.498C163.293 118.343 165.171 109.952 165.171 108.103V107.034L162.38 107.175C160.844 107.252 159.588 107.166 159.588 106.982C159.588 106.798 160.079 105.79 160.679 104.741C163.164 100.398 165.543 92.3106 165.543 88.2091V86.5776L163.966 86.8442C163.099 86.9908 161.759 87.3329 160.989 87.605C159.207 88.2333 159.164 87.8346 160.686 84.8189C162.429 81.3647 163.698 75.8294 163.769 71.3586C163.805 69.1096 163.679 67.4726 163.463 67.4007C163.261 67.3334 161.86 67.6989 160.348 68.2126C158.838 68.7266 157.533 69.0787 157.45 68.9954C157.366 68.912 157.855 67.2794 158.536 65.3673C159.745 61.9726 159.774 61.7474 159.774 55.8555C159.774 50.5685 159.692 49.7388 159.112 49.1585C158.478 48.5235 158.366 48.5402 156.403 49.568C155.277 50.1576 154.293 50.5752 154.217 50.4959C154.14 50.4162 154.321 49.0952 154.619 47.5598C155.278 44.1536 154.714 36.5394 153.593 33.7292C153.24 32.8444 153.081 32.7744 152.077 33.0621C151.46 33.2389 150.396 33.7139 149.712 34.1174L148.469 34.851L148.274 33.8542C148.167 33.3056 147.891 31.517 147.66 29.8793C146.539 21.939 140.88 3.00444 138.962 0.773709C138.199 -0.112552 138.148 -0.121485 137.568 0.535859ZM136.86 104.882C137.226 79.4265 137.765 58.4968 138.259 50.5376C138.66 44.0784 139.038 48.4833 139.656 66.8339C140.084 79.5188 140.264 95.9803 140.284 124.424C140.314 165.258 139.848 190.411 138.956 196.076C138.681 197.817 138.419 199.157 138.371 199.054C138.324 198.952 138.054 197.444 137.771 195.704C136.923 190.491 136.391 137.465 136.86 104.882ZM85.6888 148.409C66.3381 126.069 51.0796 108.034 46.1082 101.625C42.5847 97.0832 48.4241 102.708 58.0036 113.083C60.1711 115.431 69.1212 125.559 77.8922 135.59C96.5469 156.925 111.646 174.084 114.574 177.275C116.444 179.313 132.182 198.887 132.946 200.125C135.149 203.694 111.131 177.916 97.5932 162.182C95.5568 159.815 90.1997 153.617 85.6888 148.409ZM207.791 125.343C215.473 116.399 219.949 111.468 225.421 105.918C227.987 103.315 230.162 101.26 230.252 101.35C230.262 101.36 230.272 101.368 230.282 101.376C230.29 101.383 230.298 101.39 230.305 101.397C230.311 101.402 230.316 101.408 230.32 101.415C230.421 101.567 230.044 102.034 225.705 107.412C225.448 107.73 225.178 108.065 224.893 108.418C217.405 117.7 204.708 132.952 193.442 146.199C171.68 171.786 144.327 201.889 144.327 200.252C144.327 199.63 158.227 182.33 164.432 175.232C167.205 172.059 173.23 165.108 177.821 159.785C186.879 149.283 194.525 140.502 199.224 135.205C200.865 133.356 204.72 128.918 207.791 125.343ZM161.263 201.706C199.183 194.441 220.242 190.806 230.124 189.82C234.651 189.368 237.421 189.333 236.452 189.739C234.012 190.763 217.817 194.101 193.088 198.679C171.77 202.625 145.525 206.292 146.649 205.169C146.944 204.874 156.302 202.657 161.263 201.706ZM123.55 204.618C101.507 202.195 63.0368 195.55 46.0601 191.232C41.4598 190.062 40.7433 189.801 42.524 189.945C56.0111 191.039 65.5638 192.478 94.5499 197.783C102.99 199.328 112.744 201.08 116.224 201.675C122.958 202.827 132.351 204.82 132.701 205.171C133.075 205.545 130.657 205.399 123.55 204.618ZM165.802 224.166C153.25 215.837 148.834 212.771 148.81 212.367C148.74 211.213 162.362 219.212 172.546 226.307C178.413 230.394 188.763 238.492 188.48 238.775C188.282 238.974 182.64 235.34 165.802 224.166ZM107.291 224.912C115.493 219.512 119.284 217.207 124.599 214.392C128.263 212.451 128.896 212.197 128.509 212.824C127.535 214.4 89.5461 239.314 88.9803 238.748C88.6063 238.374 100.537 229.359 107.291 224.912Z"
            fill="#34771f"
            stroke={strokeColor}
            strokeWidth="2"
          >
            <animate
              attributeName="stroke-dashoffset"
              from={pathLength}
              to="0"
              dur={drawDuration}
              begin={startDelay}
              fill="freeze"
            />
                      {/* Animation fond */}
          <animate
            attributeName="fill-opacity"
            values="0;1"
            dur={drawDuration}
            begin={"0s"}
            fill="freeze"
          />
          </path>
        </g>
      </svg>
    </div>
  );
};

export default LogoAnimationStroke;
